<!DOCTYPE html>
<html>
    <body>
        <h1 id="cartStatus">You have no items in your shopping cart</h1>
        <div id="cartContentsList"></div>
        <div>Your total is Â£<span id="price"></span></div>
        <div><button onclick="emptyCart('cart')">Empty Cart</button></div>

        <a href="index.html">Continue Shopping</a>

        <script>
            var cart = JSON.parse(localStorage.getItem("Cart")) || [];

            let ul = document.createElement("ul")
            let groups =[];
            let groupsObject = {};

            cart.forEach((item) => {
                    if (groups.find(group => group.name === item)) {
                        groups.find(group => group.name === item).quantity++;
                    } else {
                    groups.push({name: item, quantity: 1})
                    }
            })

            cart.forEach((item) => {
                if (groupsObject[item]) {
                    groupsObject[item]++    
                } else {
                    groupsObject[item] = 1;
                }
            })

            console.log(groupsObject)

            groups.forEach((group) => {
                const li = document.createElement("li")
                li.textContent = `You have ${group.quantity} ${group.name} in your shopping cart.`
                ul.append(li)
            })

            document.getElementById("cartContentsList").append(ul);

            if (cart.length >= 2) {
                document.getElementById("cartStatus").textContent = `You have ${cart.length} items in your shopping cart`
             } else if (cart.length === 1) {
                document.getElementById("cartStatus").textContent = "You have 1 item in your shopping cart"
             } else {
                document.getElementById("cartStatus").textContent = "You have no items in your shopping cart"  
             }

             let havviesPrice = localStorage.getItem("havviesPrice");
             let thongsPrice = localStorage.getItem("thongsPrice")
             let flipFlopsPrice = localStorage.getItem("flipFlopsPrice"); 

             let thongsQuantity = groups.find(group => group.name === "Thongs")?.quantity || 0;
             let havviesQuantity = groups.find(group => group.name === "Havvies")?.quantity || 0;
             let flipflopsQuantity = groups.find(group => group.name === "Flip Flops")?.quantity || 0;

             document.getElementById("price").textContent = (thongsPrice * thongsQuantity) + (havviesPrice * havviesQuantity) + (flipFlopsPrice * flipflopsQuantity)

             function emptyCart (cart) {
                 localStorage.removeItem("Cart");
                 document.getElementById("cartStatus").textContent = "You have no items in your shopping cart";
                 ul = 0;
             }   

             //adding new shoe in index html only once
             


        </script>
    </body> 
</html>